import{setupValidation}from './validation.min.js';const appContent=document.getElementById('app-content');const createLoadingTemplate=()=>{return `
        <section class="loading-state" style="text-align: center; padding: 50px;">
            <h2>Carregando conteúdo...</h2>
            <p>Obrigado por aguardar. A página está sendo construída dinamicamente.</p>
        </section>
    `};async function loadContent(path){appContent.innerHTML=createLoadingTemplate();try{const response=await fetch(`${path}.html`);if(!response.ok){throw new Error('Página não encontrada.')}
const html=await response.text();const parser=new DOMParser();const doc=parser.parseFromString(html,'text/html');const newMainContent=doc.querySelector('main').innerHTML;appContent.innerHTML=newMainContent;if(path==='cadastro'){setupValidation()}}catch(error){appContent.innerHTML=`
            <section class="error-state" style="padding: 50px; color: red;">
                <h1>Erro ao Carregar</h1>
                <p>Não foi possível carregar o arquivo: ${error.message}</p>
            </section>
        `;console.error("Erro ao carregar conteúdo via SPA:",error)}}
function handleNavigation(event){const target=event.target.closest('.nav-link');if(target){event.preventDefault();const path=target.getAttribute('data-path')||'index';const url=new URL(target.href);loadContent(path);history.pushState(null,'',url.pathname)}}
export function initializeSPA(){const navElement=document.querySelector('nav');if(navElement){navElement.addEventListener('click',handleNavigation)}
const initialPath=window.location.pathname.includes('projetos')?'projetos':window.location.pathname.includes('cadastro')?'cadastro':'index';loadContent(initialPath)}